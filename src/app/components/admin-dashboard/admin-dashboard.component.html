<div class="mt-2 flex flex-wrap justify-center items-center gap-4">
  <!-- Comments -->
  <a
    class="flex h-20 w-40 flex-col items-center justify-center rounded-md border border-[#183367] transition-colors duration-100 ease-in-out hover:border-[#3d2259]"
  >
    <div class="flex flex-row items-center justify-center">
      <svg
        class="mr-3 fill-gray-500/95"
        xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink"
        version="1.1"
        width="24"
        height="24"
        viewBox="0 0 24 24"
      >
        <path
          d="M12,23A1,1 0 0,1 11,22V19H7A2,2 0 0,1 5,17V7A2,2 0 0,1 7,5H21A2,2 0 0,1 23,7V17A2,2 0 0,1 21,19H16.9L13.2,22.71C13,22.89 12.76,23 12.5,23H12M13,17V20.08L16.08,17H21V7H7V17H13M3,15H1V3A2,2 0 0,1 3,1H19V3H3V15M9,9H19V11H9V9M9,13H17V15H9V13Z"
        />
      </svg>

      <span class="font-bold text-[#8CAEF2]"> {{ totalUsers }} </span>
    </div>

    <div class="mt-2 text-sm text-[#A1A0AB]">Users</div>
  </a>

  <!-- Projects -->
  <a
    (click)="openCategories()"
    class="flex h-20 w-40 flex-col items-center justify-center rounded-md border border-[#183367] transition-colors duration-100 ease-in-out hover:border-[#3d2259]"
    style="box-shadow: rgba(23, 92, 230, 0.15) 0px 4px 24px"
  >
    <div class="flex flex-row items-center justify-center">
      <svg
        class="mr-3 fill-gray-500/95"
        xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink"
        version="1.1"
        width="24"
        height="24"
        viewBox="0 0 24 24"
      >
        <path
          d="M2.5 19.6L3.8 20.2V11.2L1.4 17C1 18.1 1.5 19.2 2.5 19.6M15.2 4.8L20.2 16.8L12.9 19.8L7.9 7.9V7.8L15.2 4.8M15.3 2.8C15 2.8 14.8 2.8 14.5 2.9L7.1 6C6.4 6.3 5.9 7 5.9 7.8C5.9 8 5.9 8.3 6 8.6L11 20.5C11.3 21.3 12 21.7 12.8 21.7C13.1 21.7 13.3 21.7 13.6 21.6L21 18.5C22 18.1 22.5 16.9 22.1 15.9L17.1 4C16.8 3.2 16 2.8 15.3 2.8M10.5 9.9C9.9 9.9 9.5 9.5 9.5 8.9S9.9 7.9 10.5 7.9C11.1 7.9 11.5 8.4 11.5 8.9S11.1 9.9 10.5 9.9M5.9 19.8C5.9 20.9 6.8 21.8 7.9 21.8H9.3L5.9 13.5V19.8Z"
        />
      </svg>

      <span class="font-bold text-[#8CAEF2]"> 45 </span>
    </div>

    <div class="mt-2 text-sm text-[#A1A0AB]">Categories</div>
  </a>
</div>

<div class="flex justify-between p-[16px]">
  <h3 class="text-[#306EE8]">User List</h3>
</div>

<div
  class="flex flex-col md:flex-row gap-[8px] md:justify-between md:items-center bg-[#51007C] p-[8px] m-[8px] rounded"
>
  <div class="relative">
    <div
      class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"
    >
      <svg
        aria-hidden="true"
        class="w-5 h-5 text-gray-500 dark:text-gray-400"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
        ></path>
      </svg>
    </div>
    <input
      type="search"
      id="default-search"
      class="block w-full p-2 pl-10 text-sm max-w-[400px] text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
      placeholder="Search User"
      [(ngModel)]="searchValue"
      (input)="onSearch(searchValue)"
    />
  </div>
  <div class="flex flex-col sm:flex-row sm:items-center gap-[8px]">
    <button class="btn btn-primary btn-sm" (click)="addUser()">
      Create New User
    </button>
    <button class="btn btn-primary btn-sm" (click)="exportexcel()">
      <svg
        class="download-icon"
        width="16"
        height="16"
        viewBox="0 0 16 16"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          class="download-arrow"
          d="M13 9L9 13M9 13L5 9M9 13V1"
          stroke="#F2F2F2"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
        <path
          d="M1 17V18C1 18.7956 1.31607 19.5587 1.87868 20.1213C2.44129 20.6839 3.20435 21 4 21H14C14.7956 21 15.5587 20.6839 16.1213 20.1213C16.6839 19.5587 17 18.7956 17 18V17"
          stroke="#F2F2F2"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
      </svg>
      Export Data to Excel
    </button>
  </div>
</div>

<div class="flex items-center justify-center" *ngIf="isFetching">
  <app-loader></app-loader>
</div>
<div class="overflow-x-scroll m-[8px] p-[16px]" *ngIf="!isFetching">
  <table
    class="table text-white"
    id="excel-table"
    *ngIf="filteredUsers.length > 0; else noUser"
  >
    <!-- head -->
    <thead class="text-white">
      <tr>
        <th>Name</th>
        <th>Category</th>
        <th>Mobile</th>
        <th>Registration Date</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      <tr
        *ngFor="let user of filteredUsers; let i = index"
        class="hover:text-[#A1A0AB] hover:bg-[#100772]"
      >
        <td>
          <div class="flex items-center space-x-3">
            <div class="avatar">
              <div class="mask mask-squircle w-12 h-12">
                <img
                  [src]="
                    this.sanitizer.bypassSecurityTrustUrl(
                      'data:image/jpg;base64,' + user.contents
                    )
                  "
                  alt="User Image"
                />
              </div>
            </div>
            <div>
              <div class="font-bold">{{ user.name | titlecase }}</div>
            </div>
          </div>
        </td>
        <td>{{ user.activities | titlecase }}</td>
        <td>{{ user.mobile }}</td>
        <td>{{ user.registrationDate | date : "dd/MM/YYYY" }}</td>
        <td class="flex gap-[8px] items-center">
          <button
            class="btn btn-square bg-slate-800 hover:bg-slate-500"
            (click)="viewUser(user)"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              height="24"
              viewBox="0 -960 960 960"
              width="24"
              fill="white"
            >
              <path
                d="M772-603 602-771l113-113 169 169-112 112ZM120-120v-170l424-424 170 170-424 424H120Z"
              />
            </svg>
          </button>
          <button
            class="btn btn-square bg-slate-800 hover:bg-red-600"
            (click)="deleteUser(user)"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              height="24"
              viewBox="0 -960 960 960"
              width="24"
              fill="white"
            >
              <path
                d="M360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM200-120v-600h-40v-80h200v-40h240v40h200v80h-40v600H200Z"
              />
            </svg>
          </button>
        </td>
      </tr>
    </tbody>
  </table>
  <ng-template #noUser>
    <div class="min-w-full h-[100px]">
      <div class="flex items-center justify-center text-white">
        No User Found
      </div>
    </div>
  </ng-template>
</div>
